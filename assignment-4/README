# Emscripten

## Code Changes

In order for the browser to still have access to its main loop, we need to use a wrapper function
from emscripten. For example:

```cpp
#ifdef EMSCRIPTEN
  emscripten_set_main_loop(render_func, 60, 1);
#else
  while(true) {
    render_func();
  }
#endif
```

To cancel emscripten's main loop, 

```cpp
#ifdef EMSCRIPTEN
  emscripten_cancel_main_loop();
#endif
```

## Compiling

These are useful flags for SDL specific:
  * -s USE_SDL=2
  * -s USE_SDL_IMAGE=2
  * -s USE_SDL_TTF=2

To include assets, 

```sh
emcc --preload-file=<dir> ...
```

## Reference

* https://emscripten.org/docs/getting_started/FAQ.html#why-doesn-t-my-sdl-app-work
* https://stackoverflow.com/questions/29335510/using-sdl2-renderdraw-functions-with-emscripten
* Font: https://www.fontspace.com/joannavu/blackpearl
* Liar's Dice Logo: https://is3-ssl.mzstatic.com/image/thumb/Purple62/v4/d2/1d/f8/d21df8ea-77d3-1699-29ee-1aa1234fce32/source/512x512bb.jpg
* Wood Pattern for Round Table: https://images.pexels.com/photos/164005/pexels-photo-164005.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260
* Forest Background: https://images.pexels.com/photos/1054196/pexels-photo-1054196.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260